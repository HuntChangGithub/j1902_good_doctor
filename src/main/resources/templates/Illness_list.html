<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>疾病百科</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <script src="layui/layui.js"></script>
    <script src="layui/layui.all.js"></script>
    <script src="jquery/jquery-2.1.1.min.js"></script>
</head>
<style>
    .loginandreg{
        position: relative;
        top: -40px;
        left: 1080px;
    }
</style>
<script>
    //通过判断session的值是否为空，改变五个标签的hidden属性
    function searchSession() {
        var username = document.getElementById("uname").innerHTML;
        //获取五个标签对应的对象
        var logina = document.getElementById("logina");
        var rega = document.getElementById("rega");
        var helloa = document.getElementById("helloa");
        var uname = document.getElementById("uname");
        var logouta = document.getElementById("logouta");

        if (username != ""){
            //如果不为空，说明已登录
            logina.setAttribute("hidden",true);
            rega.setAttribute("hidden",true);
            helloa.removeAttribute("hidden");
            uname.removeAttribute("hidden");
            logouta.removeAttribute("hidden");
        }else {
            //否则说明未登录或已退出
            logina.removeAttribute("hidden");
            rega.removeAttribute("hidden");
            helloa.setAttribute("hidden",true);
            logouta.setAttribute("hidden",true);
            uname.setAttribute("hidden",true);

        }
    }
    window.onload=function () {
        searchSession();
    }
</script>
<body  style="background-color: #e2e2e2">
<div class="layui-nav layui-bg-green" style="width: 100%;height: 50px;">
    <div class="ly-inner pg-inner">
        <ul class="topline-list fl clearfix">
            <li class="layui-nav-item"><a target="_blank" href=" ">丁香园</a></li>
            <li class="layui-nav-item"><a target="_blank" href="http://bbs.dxy.cn">论坛</a></li>
            <li class="layui-nav-item"><a target="_blank" href="http://www.biomart.cn/">丁香通</a> </li>
            <li class="layui-nav-item"><a target="_blank" href="http://i.dxy.cn/">丁香客</a></li>
            <li class="layui-nav-item"><a target="_blank" href="http://www.jobmd.cn/">医药招聘</a></li>
            <li class="layui-nav-item"><a target="_blank" href="http://paper.pubmed.cn/">文献求助</a></li>
            <li class="layui-nav-item">
                <a href="javascript:;">更多</a>
                <dl class="layui-nav-child">
                    <dd>< a href="">会议</a></dd>
                    <dd>< a href="">用药助手</a></dd>
                    <dd>< a href="">叮当铺</a></dd>
                </dl>
            </li>
        </ul>
        <div>
            <a class="loginandreg" id="logina" href="login" style="background-color: transparent;">登录</a>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <a class="loginandreg" id="rega" href="reg" style="background-color: transparent;">注册</a>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <span class="loginandreg" id="helloa" style="background-color: transparent;">你好：</span>
            <a href="personalCenter"><span class="loginandreg" id="uname" style="background-color: transparent;" th:text="${session.username}" ></span></a>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <a class="loginandreg" id="logouta" href="logout" style="background-color: transparent;">退出</a>
        </div>
    </div>

</div>

<br>
<br>
<div style="width: 100%;height: 60px" align="center">
    <form action="indexSearch" method="post">
        <a href="index"><img  style="width: 120px;height: 60px" src="logo/logo.jpg" /></a>
        <input name="searchInput" style="height: 38px;width: 450px" type="text" placeholder="请输入疾病名/药品名"/>
        <button type="submit" style="width: 100px;height: 40px" class="layui-btn">搜索</button>
    </form>
</div>
<div id="bigdiv">
    <div class="ul1" align="center" style="width: 80%;margin-left: 10%" >
        <ul class="layui-nav">
            <li class="layui-nav-item"><a href="onlinedoctory">在线问诊</a></li>
            <li class="layui-nav-item"><a href="questionandanswer">名医问答</a></li>
            <li class="layui-nav-item"><a href="diseaseencyclopedia">疾病百科</a></li>
            <li class="layui-nav-item"><a href="tuijian">健康科普</a></li>
            <li class="layui-nav-item"><a href="featuredtopics">精选专题</a></li>
            <li class="layui-nav-item"><a href="allhospital">全国医院</a></li>
            <li class="layui-nav-item"><a href="familymedication">家庭用药</a></li>
        </ul>
    </div>
    <div id="daohang" style="margin-top: 50px">
        <li style="margin-left: 250px"><a href="index">&nbsp;首页</a>&gt;<a href="">&nbsp;疾病百科</a>&gt;</li>
    </div>
    <div id="keshi" style="margin-left: 250px;margin-top: 30px;width: 65%;background-color: #eeeeee">
        <button type="button" class="layui-btn" style="width: auto;margin-left: 15px;margin-top: 10px">不限</button>
        <!--<button type="button" class="layui-btn" style="margin-top: 10px">内分泌科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">儿科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">皮肤病科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">消化内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">神经内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">妇产科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">心血管内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">普通内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">普外科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">感染科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">传染科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">骨科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">呼吸内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">肾脏内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">耳鼻咽喉科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">口腔科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">泌尿外科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">肿瘤科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">眼科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">神经外科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">心胸外科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">肾脏内科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">肝胆胰腺外科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">精神心理科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">风湿免疫科</button>
        <button type="button" class="layui-btn" style="margin-top: 10px">其他</button>-->
    </div>
</div>
<ul class="flow-default" id="layLoad">
    <li>

    </li>
</ul>
<!--<div id="baike" style="margin-left: 150px;margin-top: 30px;width: 65%;background-color: #eeeeee">
    <h3>标题</h3>
    <p>简介：</p>
    <pre>           ........................................
                .............................................
                .............................................
                .............................................</pre>

    <span>编审专家：</span><a>姓名</a><a>所在医院</a><a >科室</a>
</div>-->
<div align="center" id="bottomdiv" style="width: 100%;height: auto;background-color: #e6e6e6">
    <br><br><br>
    <a href="" style="font-size: 14px;color: #4E5465">版权声明</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">作者编委</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">丁香医生</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">丁香诊所</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">投稿邮箱 doctor@dxy.com</a>
<br><br>
<span style="font-size: 16px;color: #4E5465">Copyright  2000-2019DXY All Rights Reserved</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">浙B2-20070219-5</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">浙卫(03)网审[2015]&nbsp;&nbsp;048号</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">医疗器械网络销售备案表编号：（浙杭）网械企备字[2018]第00246号</a>
<br><br>
<a href="" style="font-size: 14px;color: #4E5465">第二类医疗器械经营备案凭证编号：浙杭食药监械经营备20153170号</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">网络文化经营许可证：浙网文[2018]11330-875号</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">食品许可证编号：JY13301080010985</a>
<br><br>
<a href="" style="font-size: 14px;color: #4E5465">出版物经营许可证：新出发滨字第0064号</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="" style="font-size: 14px;color: #4E5465">人力资源许可证编号：330101000525</a>
<br><br>
<img src="imgs/img2.png">
<a href="" style="font-size: 14px;color: #4E5465">浙公网安备 33010802004205号</a>
<br><br>
<img src="imgs/img1.jpg" style="height: 35px;width: 35px"/>
</div>
<script>
    $(function () {
        $.get('getDepartments',function (data) {
            console.log(data);
            var keshi=$("#keshi");
            keshi.empty();
            for (var i in data){
            keshi.append('<button type="button" class="layui-btn" style="width: auto;margin-left: 15px;margin-top: 10px" onclick="query('+data[i].depid+')">'+data[i].depname+'</button>');
            }
            keshi.append('<h5>&nbsp;&nbsp;</h5>');
        });
    });
    layui.use('flow', function(){
        var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。
        var flow = layui.flow;
        flow.load({
            elem: '#layLoad', //指定列表容器
            scrollElem: '#layLoad', //滚动条所在元素，一般不用填
            done: function(page, next){ //到达临界点（默认滚动触发），触发下一页
                console.log("page="+page);
                var lis = [];
                //请求下一页数据
                $.get('/diseaselist?page='+page, function(res){
                    var obj=JSON.parse(res);
                    layui.each(obj.data, function(index, list){
                        lis.push('<li><div id="baike" style="margin-left: 250px;margin-top: 30px;width: 65%;background-color: #eeeeee"><br/> <h3 style="margin-left: 15px"><a href="showIllness?illid='+list.illid+'">'+list.illname+'</a></h3> <br/><span style="margin-top: 30px;margin-left: 30px">简介：</span><div style="margin-left: 30px"> <pre>'+list.illduc+'</pre></div> <br/> </div></li>');
                    });
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < obj.pages);
                });
            }
        });
    });
    function query(depid) {
      //window.location.href="showDeptIllnessList?depid="+depid;
        $("#layLoad").empty();
        layui.use('flow', function(){
            var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。
            var flow = layui.flow;
            flow.load({
                elem: '#layLoad', //指定列表容器
                scrollElem: '#layLoad', //滚动条所在元素，一般不用填
                done: function(page, next){ //到达临界点（默认滚动触发），触发下一页
                    console.log("page="+page);
                    var lis = [];
                    //请求下一页数据
                    $.get('/deptIllnesslist?page='+page+'&depid='+depid, function(res){
                        var obj=JSON.parse(res);
                        layui.each(obj.data, function(index, list){
                            lis.push('<li><div id="baike" style="margin-left: 250px;margin-top: 30px;width: 65%;background-color: #eeeeee"><br/> <h3 style="margin-left: 15px"><a href="showIllness?illid='+list.illid+'">'+list.illname+'</a></h3> <br/><span style="margin-top: 30px;margin-left: 30px">简介：</span><div style="margin-left: 30px"> <pre>'+list.illduc+'</pre></div> <br/> </div></li>');
                        });
                        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                        next(lis.join(''), page < obj.pages);
                    });
                }
            });
        });
    };
</script>
</body>
</html>